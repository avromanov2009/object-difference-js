!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ObjDiff",[],e):"object"==typeof exports?exports.ObjDiff=e():t.ObjDiff=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={ObjectDifference:r(1).GetObjectDifference};e.default=n,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetObjectDifference=function(t,e,r){return h("",t,e,r)};var n,o=(n=r(2))&&n.__esModule?n:{default:n};function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u="created",i="updated",c="deleted",p="NA";function a(t){return""===t||0===t||null==t||t==={}||Array.isArray(t)&&t.length<1}function y(t){return!a(t)&&("boolean"==typeof t||"number"==typeof t||"string"==typeof t)}function l(t){return!a(t)&&t instanceof Date}function s(t){return!a(t)&&Array.isArray(t)}function d(t){return"function"==typeof t}function m(t){return"symbol"===f(t)}function b(t){return!(y(t)||a(t)||l(t)||s(t)||d(t)||m(t))}function g(t,e){return t?"".concat(t,".").concat(e):e}function h(t,e,r,n){var f=[];if("__ob__"===e||"__proto__"===e)return f;if(y(r)&&y(n))return r==n?f:(f.push({property:g(t,e),type:i,from:r,to:n}),f);if(d(r)||d(n))return f.push({property:g(t,e),type:p,from:(0,o.default)(r),to:(0,o.default)(n)}),f;if(m(r)||m(n))return f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f;if(l(r)&&l(n))return r.getTime()===n.getTime()?f:(f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f);if(l(n)&&y(r))return new Date(r).getTime()===n.getTime()?f:(f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f);if(l(r)&&y(n))return new Date(n).getTime()===r.getTime()?f:(f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f);if(a(r)&&a(n))return f;if(a(r)&&y(n))return f.push({property:g(t,e),type:u,from:"",to:(0,o.default)(n)}),f;if(a(r)&&l(n))return f.push({property:g(t,e),type:u,from:"",to:(0,o.default)(n)}),f;if(a(r)&&s(n)){for(var v=0;v<n.length;v++)f=f.concat(h(g(t,e),"[".concat(v,"]"),void 0,n[v]));return f}if(a(r)&&b(n))return Object.getOwnPropertyNames(n).forEach(function(r,o,u){f=f.concat(h(g(t,e),r,void 0,n[r]))}),f;if((y(r)||l(r)||s(r)||b(r))&&a(n))return f.push({property:g(t,e),type:c,from:"",to:""}),f;if((y(r)||l(r))&&s(n)){f.push({property:g(t,e),type:c,from:"",to:""});for(var O=0;O<n.length;O++)f=f.concat(h(g(t,e),"[".concat(O,"]"),void 0,n[O]));return f}if((y(r)||l(r))&&b(n))return f.push({property:g(t,e),type:c,from:"",to:""}),Object.getOwnPropertyNames(n).forEach(function(r,o,u){f=f.concat(h(g(t,e),r,void 0,n[r]))}),f;if(s(r)&&(y(n)||l(n)))return f.push({property:g(t,e),type:i,from:"Array[".concat(r.length,"]"),to:(0,o.default)(n)}),f;if(s(r)&&s(n))return f=f.concat(function(t,e,r,n){var o=[];if(r.length===n.length){for(var f=0;f<r.length;f++)if(JSON.stringify(r)!==JSON.stringify(n))for(var u=0;u<r.length;u++)o=o.concat(h(g(t,e),"[".concat(u,"]"),r[u],n[u]));return o}if(r.length>30||n.length>30)return o.push({property:g(t,e),type:i,from:"Array[".concat(r.length,"]"),to:"Array[".concat(n.length,"]")}),o;function c(t){return function(e){return 0===t.filter(function(t){return JSON.stringify(t)===JSON.stringify(e)}).length}}for(var p=r.filter(c(n)),a=n.filter(c(r)),y=0;y<p.length;y++)o=o.concat(h(g(t,e),"[".concat(y,"]"),p[y],void 0));for(var l=0;l<a.length;l++)o=o.concat(h(g(t,e),"[".concat(l,"]"),void 0,a[l]));return o}(t,e,r,n));if(s(r)&&s(n))return f.push({property:g(t,e),type:c,from:"Array[".concat(r.length,"]"),to:""}),Object.getOwnPropertyNames(n).forEach(function(r,o,u){f=f.concat(h(g(t,e),r,void 0,n[r]))}),f;if(b(r)&&(y(n)||l(n)))return f.push({property:g(t,e),type:i,from:"{}",to:(0,o.default)(n)}),f;if(b(r)&&s(n)){f.push({property:g(t,e),type:c,from:"{}",to:(0,o.default)(n)});for(var j=0;j<n.length;j++)f=f.concat(h(g(t,e),"[".concat(j,"]"),void 0,n[j]));return f}return b(r)&&b(n)&&(Object.getOwnPropertyNames(r).forEach(function(o,u,i){f=f.concat(h(g(t,e),o,r[o],n[o]))}),Object.getOwnPropertyNames(n).forEach(function(o,u,i){void 0===r[o]&&(f=f.concat(h(g(t,e),o,void 0,n[o])))})),f}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){if("boolean"==typeof e||"number"==typeof e||"string"==typeof e)return e.toString();if(null===e)return"null";if(void 0===e)return"undefined";if("symbol"===n(e))return"symbol";if(e instanceof Date)return e.toUTCString();if(Array.isArray(e))return e.map(function(e){return t(e)}).join(", ");if("function"==typeof e)return"function";return JSON.stringify(e)},t.exports=e.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9PYmpEaWZmL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9PYmpEaWZmL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL09iakRpZmYvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vT2JqRGlmZi8uL3NyYy9vYmplY3REaWZmZXJlbmNlLmpzIiwid2VicGFjazovL09iakRpZmYvLi9zcmMvYW55VG9TdHJpbmcuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiT2JqZWN0RGlmZmVyZW5jZSIsIkdldE9iamVjdERpZmZlcmVuY2UiLCJvYmplY3ROYW1lIiwidmFsdWVGcm9tIiwidmFsdWVUbyIsIl9HZXRPYmplY3REaWZmZXJlbmNlIiwiX2FueVRvU3RyaW5nIiwiVkFMVUVfQ1JFQVRFRCIsIlZBTFVFX1VQREFURUQiLCJWQUxVRV9ERUxFVEVEIiwiTk9UX0NPTVBBUkFCTEUiLCJfaXNCbGFuayIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIl9pc1ZhbHVlIiwiX2lzRGF0ZSIsIkRhdGUiLCJfaXNBcnJheSIsIl9pc0Z1bmN0aW9uIiwiX2lzU3ltYm9sIiwiX3R5cGVvZiIsIl9pc09iamVjdCIsIl9nZXRGdWxsUHJvcE5hbWUiLCJwYXJlbnROYW1lIiwicHJvcGVydHlOYW1lIiwiY29uY2F0IiwiZGlmZiIsInB1c2giLCJ0eXBlIiwiZnJvbSIsInRvIiwiZGVmYXVsdCIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZm9yRWFjaCIsInZhbCIsImlkeCIsImFycmF5IiwiYTEiLCJhMiIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb21wYXJlciIsIm90aGVyQXJyYXkiLCJjdXJyZW50IiwiZmlsdGVyIiwib3RoZXIiLCJvbmx5SW5BMSIsIm9ubHlJbkEyIiwiX2dldEFycmF5RGlmZmVuY2UiLCJhbnlUb1N0cmluZyIsInRvU3RyaW5nIiwidG9VVENTdHJpbmciLCJtYXAiLCJ4Iiwiam9pbiJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxhQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLFFBQUFELElBRUFELEVBQUEsUUFBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFB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QyxHQUFlWSxFQUFLbEMsRUFBVWtDLEdBQU1qQyxFQUFRaUMsT0FFbkgzRCxPQUFPeUQsb0JBQW9CL0IsR0FBU2dDLFFBQVEsU0FBVUMsRUFBS0MsRUFBS0MsUUFDdkNMLElBQW5CL0IsRUFBVWtDLEtBR2RWLEVBQU9BLEVBQUtELE9BQU9yQixFQUFxQmtCLEVBQWlCQyxFQUFZQyxHQUFlWSxPQUFLSCxFQUFXOUIsRUFBUWlDLFNBSXpHVixpVUMzVE0sU0FBU3lCLEVBQVlsRSxHQUNsQyxHQUFpQixrQkFBTkEsR0FBZ0MsaUJBQU5BLEdBQStCLGlCQUFOQSxFQUM1RCxPQUFPQSxFQUFFbUUsV0FDSixHQUFVLE9BQU5uRSxFQUNULE1BQU8sT0FDRixRQUFVZ0QsSUFBTmhELEVBQ1QsTUFBTyxZQUVULEdBQWlCLFdBQWJtQyxFQUFPbkMsR0FDVCxNQUFPLFNBQ0YsR0FBSUEsYUFBYStCLEtBQ3RCLE9BQU8vQixFQUFFb0UsY0FDSixHQUFJMUMsTUFBTUMsUUFBUTNCLEdBQ3ZCLE9BQU9BLEVBQ0pxRSxJQUFJLFNBQUFDLEdBQ0gsT0FBT0osRUFBWUksS0FFcEJDLEtBQUssTUFDSCxHQUFpQixtQkFBTnZFLEVBQ2hCLE1BQU8sV0FFVCxPQUFPd0QsS0FBS0MsVUFBVXpEIiwiZmlsZSI6Im9iamVjdC1kaWZmZXJlbmNlLWpzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiT2JqRGlmZlwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJPYmpEaWZmXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIk9iakRpZmZcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgR2V0T2JqZWN0RGlmZmVyZW5jZSBhcyBPYmplY3REaWZmZXJlbmNlfSBmcm9tIFwiLi9vYmplY3REaWZmZXJlbmNlLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IHsgT2JqZWN0RGlmZmVyZW5jZSB9O1xyXG4iLCJpbXBvcnQgYW55VG9TdHJpbmcgZnJvbSBcIi4vYW55VG9TdHJpbmcuanNcIjtcclxuXHJcbmNvbnN0IFZBTFVFX0NSRUFURUQgPSBcImNyZWF0ZWRcIixcclxuICBWQUxVRV9VUERBVEVEID0gXCJ1cGRhdGVkXCIsXHJcbiAgVkFMVUVfREVMRVRFRCA9IFwiZGVsZXRlZFwiLFxyXG4gIE5PVF9DT01QQVJBQkxFID0gXCJOQVwiO1xyXG5cclxuZnVuY3Rpb24gX2lzQmxhbmsodCkge1xyXG4gIHJldHVybiB0ID09PSBcIlwiIHx8IHQgPT09IDAgfHwgdCA9PT0gdW5kZWZpbmVkIHx8IHQgPT09IG51bGwgfHwgdCA9PT0ge30gfHwgKEFycmF5LmlzQXJyYXkodCkgJiYgdC5sZW5ndGggPCAxKTtcclxufVxyXG5mdW5jdGlvbiBfaXNWYWx1ZSh0KSB7XHJcbiAgcmV0dXJuICFfaXNCbGFuayh0KSAmJiAodHlwZW9mIHQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiB0ID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKTtcclxufVxyXG5mdW5jdGlvbiBfaXNEYXRlKHQpIHtcclxuICByZXR1cm4gIV9pc0JsYW5rKHQpICYmIHQgaW5zdGFuY2VvZiBEYXRlO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0FycmF5KHQpIHtcclxuICByZXR1cm4gIV9pc0JsYW5rKHQpICYmIEFycmF5LmlzQXJyYXkodCk7XHJcbn1cclxuZnVuY3Rpb24gX2lzRnVuY3Rpb24odCkge1xyXG4gIHJldHVybiB0eXBlb2YgdCA9PT0gXCJmdW5jdGlvblwiO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1N5bWJvbCh0KSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB0ID09PSBcInN5bWJvbFwiO1xyXG59XHJcbmZ1bmN0aW9uIF9pc09iamVjdCh0KSB7XHJcbiAgcmV0dXJuICFfaXNWYWx1ZSh0KSAmJiAhX2lzQmxhbmsodCkgJiYgIV9pc0RhdGUodCkgJiYgIV9pc0FycmF5KHQpICYmICFfaXNGdW5jdGlvbih0KSAmJiAhX2lzU3ltYm9sKHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSkge1xyXG4gIHJldHVybiBwYXJlbnROYW1lID8gYCR7cGFyZW50TmFtZX0uJHtwcm9wZXJ0eU5hbWV9YCA6IHByb3BlcnR5TmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2dldEFycmF5RGlmZmVuY2UocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lLCBhMSwgYTIpIHtcclxuICBsZXQgZGlmZiA9IFtdO1xyXG5cclxuICBpZiAoYTEubGVuZ3RoID09PSBhMi5sZW5ndGgpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGExKSA9PT0gSlNPTi5zdHJpbmdpZnkoYTIpKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgYFske2l9XWAsIGExW2ldLCBhMltpXSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIGlmIChhMS5sZW5ndGggPiAzMCB8fCBhMi5sZW5ndGggPiAzMCkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogYEFycmF5WyR7YTEubGVuZ3RofV1gLFxyXG4gICAgICB0bzogYEFycmF5WyR7YTIubGVuZ3RofV1gXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29tcGFyZXIob3RoZXJBcnJheSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJyZW50KSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgb3RoZXJBcnJheS5maWx0ZXIoZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob3RoZXIpID09PSBKU09OLnN0cmluZ2lmeShjdXJyZW50KTtcclxuICAgICAgICB9KS5sZW5ndGggPT09IDBcclxuICAgICAgKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBsZXQgb25seUluQTEgPSBhMS5maWx0ZXIoY29tcGFyZXIoYTIpKTtcclxuXHJcbiAgbGV0IG9ubHlJbkEyID0gYTIuZmlsdGVyKGNvbXBhcmVyKGExKSk7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb25seUluQTEubGVuZ3RoOyBpKyspIHtcclxuICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCBvbmx5SW5BMVtpXSwgdW5kZWZpbmVkKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICB9XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb25seUluQTIubGVuZ3RoOyBpKyspIHtcclxuICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCB1bmRlZmluZWQsIG9ubHlJbkEyW2ldKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICB9XHJcblxyXG4gIHJldHVybiBkaWZmO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfR2V0T2JqZWN0RGlmZmVyZW5jZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUsIHZhbHVlRnJvbSwgdmFsdWVUbykge1xyXG4gIGxldCBkaWZmID0gW107XHJcblxyXG4gIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwiX19vYl9fXCIgfHwgcHJvcGVydHlOYW1lID09PSBcIl9fcHJvdG9fX1wiKSB7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTog5Lik5Liq6YO95piv5Z+656GA57G75Z6LXHJcbiAgaWYgKF9pc1ZhbHVlKHZhbHVlRnJvbSkgJiYgX2lzVmFsdWUodmFsdWVUbykpIHtcclxuICAgIGlmICh2YWx1ZUZyb20gPT0gdmFsdWVUbykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbiAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgfVxyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogdmFsdWVGcm9tLFxyXG4gICAgICB0bzogdmFsdWVUb1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IOaOkumZpOaciWZ1bmN0aW9u55qE5oOF5Ya1XHJcbiAgaWYgKF9pc0Z1bmN0aW9uKHZhbHVlRnJvbSkgfHwgX2lzRnVuY3Rpb24odmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IE5PVF9DT01QQVJBQkxFLFxyXG4gICAgICBmcm9tOiBhbnlUb1N0cmluZyh2YWx1ZUZyb20pLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiDlhbbkuK3kuIDkuKrmmK9zeW1ib2xcclxuICBpZiAoX2lzU3ltYm9sKHZhbHVlRnJvbSkgfHwgX2lzU3ltYm9sKHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiBhbnlUb1N0cmluZyh2YWx1ZUZyb20pLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiDkuKTkuKrpg73mmK/ml6XmnJ9cclxuICBpZiAoX2lzRGF0ZSh2YWx1ZUZyb20pICYmIF9pc0RhdGUodmFsdWVUbykpIHtcclxuICAgIGlmICh2YWx1ZUZyb20uZ2V0VGltZSgpID09PSB2YWx1ZVRvLmdldFRpbWUoKSkge1xyXG4gICAgICByZXR1cm4gZGlmZjtcclxuICAgIH1cclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX1VQREFURUQsXHJcbiAgICAgIGZyb206IGFueVRvU3RyaW5nKHZhbHVlRnJvbSksXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IOS4gOS4quaYr+aXpeacn++8jOWPpuS4gOS4quaYr+WAvFxyXG4gIGlmIChfaXNEYXRlKHZhbHVlVG8pICYmIF9pc1ZhbHVlKHZhbHVlRnJvbSkpIHtcclxuICAgIGlmIChuZXcgRGF0ZSh2YWx1ZUZyb20pLmdldFRpbWUoKSA9PT0gdmFsdWVUby5nZXRUaW1lKCkpIHtcclxuICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICB9XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiBhbnlUb1N0cmluZyh2YWx1ZUZyb20pLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG4gIGlmIChfaXNEYXRlKHZhbHVlRnJvbSkgJiYgX2lzVmFsdWUodmFsdWVUbykpIHtcclxuICAgIGlmIChuZXcgRGF0ZSh2YWx1ZVRvKS5nZXRUaW1lKCkgPT09IHZhbHVlRnJvbS5nZXRUaW1lKCkpIHtcclxuICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICB9XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiBhbnlUb1N0cmluZyh2YWx1ZUZyb20pLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiDkuKTkuKrpg73mmK9CbGFua1xyXG4gIGlmIChfaXNCbGFuayh2YWx1ZUZyb20pICYmIF9pc0JsYW5rKHZhbHVlVG8pKSB7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTogRnJvbeaYr2JsYW5rLCBUb+S4jeaYr1xyXG4gIGlmIChfaXNCbGFuayh2YWx1ZUZyb20pICYmIF9pc1ZhbHVlKHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9DUkVBVEVELFxyXG4gICAgICBmcm9tOiBcIlwiLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG4gIGlmIChfaXNCbGFuayh2YWx1ZUZyb20pICYmIF9pc0RhdGUodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0NSRUFURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzQXJyYXkodmFsdWVUbykpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgdW5kZWZpbmVkLCB2YWx1ZVRvW2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzT2JqZWN0KHZhbHVlVG8pKSB7XHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZVRvKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB1bmRlZmluZWQsIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTogRnJvbeS4jeaYr2JsYW5rLCBUb+aYr1xyXG4gIGlmICgoX2lzVmFsdWUodmFsdWVGcm9tKSB8fCBfaXNEYXRlKHZhbHVlRnJvbSkgfHwgX2lzQXJyYXkodmFsdWVGcm9tKSB8fCBfaXNPYmplY3QodmFsdWVGcm9tKSkgJiYgX2lzQmxhbmsodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0RFTEVURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBcIlwiXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr+WAvOaIluaXpeacn++8jFRv5pivQXJyYXlcclxuICBpZiAoKF9pc1ZhbHVlKHZhbHVlRnJvbSkgfHwgX2lzRGF0ZSh2YWx1ZUZyb20pKSAmJiBfaXNBcnJheSh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogXCJcIixcclxuICAgICAgdG86IFwiXCJcclxuICAgIH0pO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgdW5kZWZpbmVkLCB2YWx1ZVRvW2ldKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5piv5YC85oiW5pel5pyf77yMVG/mmK9PYmplY3RcclxuICBpZiAoKF9pc1ZhbHVlKHZhbHVlRnJvbSkgfHwgX2lzRGF0ZSh2YWx1ZUZyb20pKSAmJiBfaXNPYmplY3QodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0RFTEVURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBcIlwiXHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZVRvKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB1bmRlZmluZWQsIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5pivQXJyYXnvvIxUb+aYr+WAvOaIluaXpeacn1xyXG4gIGlmIChfaXNBcnJheSh2YWx1ZUZyb20pICYmIChfaXNWYWx1ZSh2YWx1ZVRvKSB8fCBfaXNEYXRlKHZhbHVlVG8pKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogYEFycmF5WyR7dmFsdWVGcm9tLmxlbmd0aH1dYCxcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr0FycmF577yMVG/mmK9BcnJheVxyXG4gIGlmIChfaXNBcnJheSh2YWx1ZUZyb20pICYmIF9pc0FycmF5KHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmID0gZGlmZi5jb25jYXQoX2dldEFycmF5RGlmZmVuY2UocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lLCB2YWx1ZUZyb20sIHZhbHVlVG8pKTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr0FycmF577yMVG/mmK9PYmplY3RcclxuICBpZiAoX2lzQXJyYXkodmFsdWVGcm9tKSAmJiBfaXNBcnJheSh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogYEFycmF5WyR7dmFsdWVGcm9tLmxlbmd0aH1dYCxcclxuICAgICAgdG86IFwiXCJcclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlVG8pLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaWR4LCBhcnJheSkge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCB2YWwsIHVuZGVmaW5lZCwgdmFsdWVUb1t2YWxdKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IEZyb23mmK9PYmplY3TvvIxUb+aYr+WAvOaIluaXpeacn1xyXG4gIGlmIChfaXNPYmplY3QodmFsdWVGcm9tKSAmJiAoX2lzVmFsdWUodmFsdWVUbykgfHwgX2lzRGF0ZSh2YWx1ZVRvKSkpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX1VQREFURUQsXHJcbiAgICAgIGZyb206IFwie31cIixcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTogRnJvbeaYr09iamVjdO+8jFRv5pivQXJyYXlcclxuICBpZiAoX2lzT2JqZWN0KHZhbHVlRnJvbSkgJiYgX2lzQXJyYXkodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0RFTEVURUQsXHJcbiAgICAgIGZyb206IFwie31cIixcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgdW5kZWZpbmVkLCB2YWx1ZVRvW2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IEZyb23mmK9PYmplY3TvvIxUb+aYr09iamVjdFxyXG4gIGlmIChfaXNPYmplY3QodmFsdWVGcm9tKSAmJiBfaXNPYmplY3QodmFsdWVUbykpIHtcclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlRnJvbSkuZm9yRWFjaChmdW5jdGlvbiAodmFsLCBpZHgsIGFycmF5KSB7XHJcbiAgICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIHZhbCwgdmFsdWVGcm9tW3ZhbF0sIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZVRvKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgaWYgKHZhbHVlRnJvbVt2YWxdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB1bmRlZmluZWQsIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGlmZjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBkZWVwIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gb2JqZWN0cy4gQW4gZW1wdHkgYXJyYXkgd2lsbCBiZSByZXR1cm5lZCBmb3IgdHdvIHNhbWUgb2JqZWN0cyBjb21wYXJpbmcuXHJcbiAqXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHsqfSBwcm9wZXJ0eU5hbWUgb2JqZWN0IG5hbWUsIGFzIHRoZSByb290IHByb3BlcnR5IG5hbWVcclxuICogQHBhcmFtIHsqfSB2YWx1ZUZyb20gdmFsdWUgY29tcGFyaW5nIG9uIHRoZSBsZWZ0XHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWVUbyB2YWx1ZSBjb21wYXJpbmcgb24gdGhlIHJpZ2h0XHJcbiAqIEByZXR1cm5zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gR2V0T2JqZWN0RGlmZmVyZW5jZShvYmplY3ROYW1lLCB2YWx1ZUZyb20sIHZhbHVlVG8pIHtcclxuICByZXR1cm4gX0dldE9iamVjdERpZmZlcmVuY2UoXCJcIiwgb2JqZWN0TmFtZSwgdmFsdWVGcm9tLCB2YWx1ZVRvKTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhbnlUb1N0cmluZyh0KSB7XHJcbiAgaWYgKHR5cGVvZiB0ID09PSBcImJvb2xlYW5cIiB8fCB0eXBlb2YgdCA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgcmV0dXJuIHQudG9TdHJpbmcoKTtcclxuICB9IGVsc2UgaWYgKHQgPT09IG51bGwpIHtcclxuICAgIHJldHVybiBcIm51bGxcIjtcclxuICB9IGVsc2UgaWYgKHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgdCA9PT0gXCJzeW1ib2xcIikge1xyXG4gICAgcmV0dXJuIFwic3ltYm9sXCI7XHJcbiAgfSBlbHNlIGlmICh0IGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgcmV0dXJuIHQudG9VVENTdHJpbmcoKTtcclxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodCkpIHtcclxuICAgIHJldHVybiB0XHJcbiAgICAgIC5tYXAoeCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFueVRvU3RyaW5nKHgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbihcIiwgXCIpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIHQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcclxuICB9XHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9