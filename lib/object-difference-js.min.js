!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("object-difference-js",[],e):"object"==typeof exports?exports["object-difference-js"]=e():t["object-difference-js"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={ObjectDifference:r(1).GetObjectDifference};e.default=n,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetObjectDifference=function(t,e,r){return m("",t,e,r)};var n,o=(n=r(2))&&n.__esModule?n:{default:n};var f="created",u="updated",i="deleted",c="NA";function p(t){return""===t||0===t||null==t||t==={}||Array.isArray(t)&&t.length<1}function a(t){return!p(t)&&("boolean"==typeof t||"number"==typeof t||"string"==typeof t)}function y(t){return!p(t)&&t instanceof Date}function l(t){return!p(t)&&Array.isArray(t)}function d(t){return"function"==typeof t}function s(t){return!(a(t)||p(t)||y(t)||l(t)||d(t))}function b(t,e){return t?"".concat(t,".").concat(e):e}function m(t,e,r,n){var g=[];if("__ob__"===e||"__proto__"===e)return g;if(a(r)&&a(n))return r===n?g:(g.push({property:b(t,e),type:u,from:r,to:n}),g);if(d(r)||d(n))return g.push({property:b(t,e),type:c,from:(0,o.default)(r),to:(0,o.default)(n)}),g;if(y(r)&&y(n))return r.getTime()===n.getTime()?g:(g.push({property:b(t,e),type:u,from:(0,o.default)(r),to:(0,o.default)(n)}),g);if(y(r)&&a(n)||y(n)&&a(r))return g.push({property:b(t,e),type:u,from:(0,o.default)(r),to:(0,o.default)(n)}),g;if(p(r)&&p(n))return g;if(p(r)&&a(n))return g.push({property:b(t,e),type:f,from:"",to:(0,o.default)(n)}),g;if(p(r)&&y(n))return g.push({property:b(t,e),type:f,from:"",to:(0,o.default)(n)}),g;if(p(r)&&l(n)){for(var h=0;h<n.length;h++)g=g.concat(m(b(t,e),"[".concat(h,"]"),void 0,n[h]));return g}if(p(r)&&s(n))return Object.getOwnPropertyNames(n).forEach(function(r,o,f){g=g.concat(m(b(t,e),r,void 0,n[r]))}),g;if((a(r)||y(r)||l(r)||s(r))&&p(n))return g.push({property:b(t,e),type:i,from:"",to:""}),g;if((a(r)||y(r))&&l(n)){g.push({property:b(t,e),type:i,from:"",to:""});for(var v=0;v<n.length;v++)g=g.concat(m(b(t,e),"[".concat(v,"]"),void 0,n[v]));return g}if((a(r)||y(r))&&s(n))return g.push({property:b(t,e),type:i,from:"",to:""}),Object.getOwnPropertyNames(n).forEach(function(r,o,f){g=g.concat(m(b(t,e),r,void 0,n[r]))}),g;if(l(r)&&(a(n)||y(n)))return g.push({property:b(t,e),type:u,from:"Array[".concat(r.length,"]"),to:(0,o.default)(n)}),g;if(l(r)&&l(n))return g=g.concat(function(t,e,r,n){var o=[];if(r.length===n.length){for(var f=0;f<r.length;f++)if(JSON.stringify(r)!==JSON.stringify(n))for(var i=0;i<r.length;i++)o=o.concat(m(b(t,e),"[".concat(i,"]"),r[i],n[i]));return o}if(r.length>30||n.length>30)return o.push({property:b(t,e),type:u,from:"Array[".concat(r.length,"]"),to:"Array[".concat(n.length,"]")}),o;function c(t){return function(e){return 0===t.filter(function(t){return JSON.stringify(t)===JSON.stringify(e)}).length}}for(var p=r.filter(c(n)),a=n.filter(c(r)),y=0;y<p.length;y++)o=o.concat(m(b(t,e),"[".concat(y,"]"),p[y],void 0));for(var l=0;l<a.length;l++)o=o.concat(m(b(t,e),"[".concat(l,"]"),void 0,a[l]));return o}(t,e,r,n));if(l(r)&&l(n))return g.push({property:b(t,e),type:i,from:"Array[".concat(r.length,"]"),to:""}),Object.getOwnPropertyNames(n).forEach(function(r,o,f){g=g.concat(m(b(t,e),r,void 0,n[r]))}),g;if(s(r)&&(a(n)||y(n)))return g.push({property:b(t,e),type:u,from:"{}",to:(0,o.default)(n)}),g;if(s(r)&&l(n)){g.push({property:b(t,e),type:i,from:"{}",to:(0,o.default)(n)});for(var j=0;j<n.length;j++)g=g.concat(m(b(t,e),"[".concat(j,"]"),void 0,n[j]));return g}return s(r)&&s(n)&&(Object.getOwnPropertyNames(r).forEach(function(o,f,u){g=g.concat(m(b(t,e),o,r[o],n[o]))}),Object.getOwnPropertyNames(n).forEach(function(o,f,u){void 0===r[o]&&(g=g.concat(m(b(t,e),o,void 0,n[o])))})),g}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){if("boolean"==typeof e||"number"==typeof e||"string"==typeof e)return e.toString();if(null===e)return"null";if(void 0===e)return"undefined";if("symbol"===n(e))return"symbol";if(e instanceof Date)return e.toUTCString();if(Array.isArray(e))return e.map(function(e){return t(e)}).join(", ");if("function"==typeof e)return"function";return JSON.stringify(e)},t.exports=e.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYmplY3QtZGlmZmVyZW5jZS1qcy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vb2JqZWN0LWRpZmZlcmVuY2UtanMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2JqZWN0LWRpZmZlcmVuY2UtanMvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2JqZWN0LWRpZmZlcmVuY2UtanMvLi9zcmMvb2JqZWN0RGlmZmVyZW5jZS5qcyIsIndlYnBhY2s6Ly9vYmplY3QtZGlmZmVyZW5jZS1qcy8uL3NyYy9hbnlUb1N0cmluZy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJPYmplY3REaWZmZXJlbmNlIiwiR2V0T2JqZWN0RGlmZmVyZW5jZSIsIm9iamVjdE5hbWUiLCJ2YWx1ZUZyb20iLCJ2YWx1ZVRvIiwiX0dldE9iamVjdERpZmZlcmVuY2UiLCJfYW55VG9TdHJpbmciLCJWQUxVRV9DUkVBVEVEIiwiVkFMVUVfVVBEQVRFRCIsIlZBTFVFX0RFTEVURUQiLCJOT1RfQ09NUEFSQUJMRSIsIl9pc0JsYW5rIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiX2lzVmFsdWUiLCJfaXNEYXRlIiwiRGF0ZSIsIl9pc0FycmF5IiwiX2lzRnVuY3Rpb24iLCJfaXNPYmplY3QiLCJfZ2V0RnVsbFByb3BOYW1lIiwicGFyZW50TmFtZSIsInByb3BlcnR5TmFtZSIsImNvbmNhdCIsImRpZmYiLCJwdXNoIiwidHlwZSIsImZyb20iLCJ0byIsImRlZmF1bHQiLCJnZXRUaW1lIiwidW5kZWZpbmVkIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJ2YWwiLCJpZHgiLCJhcnJheSIsImExIiwiYTIiLCJKU09OIiwic3RyaW5naWZ5IiwiY29tcGFyZXIiLCJvdGhlckFycmF5IiwiY3VycmVudCIsImZpbHRlciIsIm90aGVyIiwib25seUluQTEiLCJvbmx5SW5BMiIsIl9nZXRBcnJheURpZmZlbmNlIiwiYW55VG9TdHJpbmciLCJ0b1N0cmluZyIsIl90eXBlb2YiLCJ0b1VUQ1N0cmluZyIsIm1hcCIsIngiLCJqb2luIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLDBCQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLHdCQUFBRCxJQUVBRCxFQUFBLHdCQUFBQyxJQVJBLENBU0Msb0JBQUFLLFVBQUFDLEtBQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFSLFFBR0EsSUFBQUMsRUFBQUssRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FWLFFBQUEsSUFVQSxPQU5BVyxFQUFBSCxHQUFBSSxLQUFBWCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTyxHQUdBTixFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBMERBLE9BckRBTyxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFmLEVBQUFn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QyxNQUFNQyxRQUFRM0IsR0FDdkIsT0FBT0EsRUFDSm9FLElBQUksU0FBQUMsR0FDSCxPQUFPTCxFQUFZSyxLQUVwQkMsS0FBSyxNQUNILEdBQWlCLG1CQUFOdEUsRUFDaEIsTUFBTyxXQUVULE9BQU9zRCxLQUFLQyxVQUFVdkQiLCJmaWxlIjoib2JqZWN0LWRpZmZlcmVuY2UtanMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJvYmplY3QtZGlmZmVyZW5jZS1qc1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJvYmplY3QtZGlmZmVyZW5jZS1qc1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJvYmplY3QtZGlmZmVyZW5jZS1qc1wiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBHZXRPYmplY3REaWZmZXJlbmNlIGFzIE9iamVjdERpZmZlcmVuY2V9IGZyb20gXCIuL29iamVjdERpZmZlcmVuY2UuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgeyBPYmplY3REaWZmZXJlbmNlIH07XHJcbiIsImltcG9ydCBhbnlUb1N0cmluZyBmcm9tIFwiLi9hbnlUb1N0cmluZy5qc1wiO1xyXG5cclxuY29uc3QgVkFMVUVfQ1JFQVRFRCA9IFwiY3JlYXRlZFwiLFxyXG4gIFZBTFVFX1VQREFURUQgPSBcInVwZGF0ZWRcIixcclxuICBWQUxVRV9ERUxFVEVEID0gXCJkZWxldGVkXCIsXHJcbiAgTk9UX0NPTVBBUkFCTEUgPSBcIk5BXCI7XHJcblxyXG5mdW5jdGlvbiBfaXNCbGFuayh0KSB7XHJcbiAgcmV0dXJuIHQgPT09IFwiXCIgfHwgdCA9PT0gMCB8fCB0ID09PSB1bmRlZmluZWQgfHwgdCA9PT0gbnVsbCB8fCB0ID09PSB7fSB8fCAoQXJyYXkuaXNBcnJheSh0KSAmJiB0Lmxlbmd0aCA8IDEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1ZhbHVlKHQpIHtcclxuICByZXR1cm4gIV9pc0JsYW5rKHQpICYmICh0eXBlb2YgdCA9PT0gXCJib29sZWFuXCIgfHwgdHlwZW9mIHQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHQgPT09IFwic3RyaW5nXCIpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0RhdGUodCkge1xyXG4gIHJldHVybiAhX2lzQmxhbmsodCkgJiYgdCBpbnN0YW5jZW9mIERhdGU7XHJcbn1cclxuZnVuY3Rpb24gX2lzQXJyYXkodCkge1xyXG4gIHJldHVybiAhX2lzQmxhbmsodCkgJiYgQXJyYXkuaXNBcnJheSh0KTtcclxufVxyXG5mdW5jdGlvbiBfaXNGdW5jdGlvbih0KSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB0ID09PSBcImZ1bmN0aW9uXCI7XHJcbn1cclxuZnVuY3Rpb24gX2lzT2JqZWN0KHQpIHtcclxuICByZXR1cm4gIV9pc1ZhbHVlKHQpICYmICFfaXNCbGFuayh0KSAmJiAhX2lzRGF0ZSh0KSAmJiAhX2lzQXJyYXkodCkgJiYgIV9pc0Z1bmN0aW9uKHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSkge1xyXG4gIHJldHVybiBwYXJlbnROYW1lID8gYCR7cGFyZW50TmFtZX0uJHtwcm9wZXJ0eU5hbWV9YCA6IHByb3BlcnR5TmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2dldEFycmF5RGlmZmVuY2UocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lLCBhMSwgYTIpIHtcclxuICBsZXQgZGlmZiA9IFtdO1xyXG5cclxuICBpZiAoYTEubGVuZ3RoID09PSBhMi5sZW5ndGgpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGExKSA9PT0gSlNPTi5zdHJpbmdpZnkoYTIpKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgYFske2l9XWAsIGExW2ldLCBhMltpXSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIGlmIChhMS5sZW5ndGggPiAzMCB8fCBhMi5sZW5ndGggPiAzMCkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogYEFycmF5WyR7YTEubGVuZ3RofV1gLFxyXG4gICAgICB0bzogYEFycmF5WyR7YTIubGVuZ3RofV1gXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29tcGFyZXIob3RoZXJBcnJheSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJyZW50KSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgb3RoZXJBcnJheS5maWx0ZXIoZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob3RoZXIpID09PSBKU09OLnN0cmluZ2lmeShjdXJyZW50KTtcclxuICAgICAgICB9KS5sZW5ndGggPT09IDBcclxuICAgICAgKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBsZXQgb25seUluQTEgPSBhMS5maWx0ZXIoY29tcGFyZXIoYTIpKTtcclxuXHJcbiAgbGV0IG9ubHlJbkEyID0gYTIuZmlsdGVyKGNvbXBhcmVyKGExKSk7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb25seUluQTEubGVuZ3RoOyBpKyspIHtcclxuICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCBvbmx5SW5BMVtpXSwgdW5kZWZpbmVkKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICB9XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb25seUluQTIubGVuZ3RoOyBpKyspIHtcclxuICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCB1bmRlZmluZWQsIG9ubHlJbkEyW2ldKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICB9XHJcblxyXG4gIHJldHVybiBkaWZmO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfR2V0T2JqZWN0RGlmZmVyZW5jZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUsIHZhbHVlRnJvbSwgdmFsdWVUbykge1xyXG4gIGxldCBkaWZmID0gW107XHJcblxyXG4gIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwiX19vYl9fXCIgfHwgcHJvcGVydHlOYW1lID09PSBcIl9fcHJvdG9fX1wiKSB7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTog5Lik5Liq6YO95piv5Z+656GA57G75Z6LXHJcbiAgaWYgKF9pc1ZhbHVlKHZhbHVlRnJvbSkgJiYgX2lzVmFsdWUodmFsdWVUbykpIHtcclxuICAgIGlmICh2YWx1ZUZyb20gPT09IHZhbHVlVG8pIHtcclxuICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICB9XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiB2YWx1ZUZyb20sXHJcbiAgICAgIHRvOiB2YWx1ZVRvXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTog5o6S6Zmk5pyJZnVuY3Rpb27nmoTmg4XlhrVcclxuICBpZiAoX2lzRnVuY3Rpb24odmFsdWVGcm9tKSB8fCBfaXNGdW5jdGlvbih2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogTk9UX0NPTVBBUkFCTEUsXHJcbiAgICAgIGZyb206IGFueVRvU3RyaW5nKHZhbHVlRnJvbSksXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IOS4pOS4qumDveaYr+aXpeacn1xyXG4gIGlmIChfaXNEYXRlKHZhbHVlRnJvbSkgJiYgX2lzRGF0ZSh2YWx1ZVRvKSkge1xyXG4gICAgaWYgKHZhbHVlRnJvbS5nZXRUaW1lKCkgPT09IHZhbHVlVG8uZ2V0VGltZSgpKSB7XHJcbiAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgfVxyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogYW55VG9TdHJpbmcodmFsdWVGcm9tKSxcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTog5LiA5Liq5piv5pel5pyf77yM5Y+m5LiA5Liq5piv5YC8XHJcbiAgaWYgKChfaXNEYXRlKHZhbHVlRnJvbSkgJiYgX2lzVmFsdWUodmFsdWVUbykpIHx8IChfaXNEYXRlKHZhbHVlVG8pICYmIF9pc1ZhbHVlKHZhbHVlRnJvbSkpKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiBhbnlUb1N0cmluZyh2YWx1ZUZyb20pLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiDkuKTkuKrpg73mmK9CbGFua1xyXG4gIGlmIChfaXNCbGFuayh2YWx1ZUZyb20pICYmIF9pc0JsYW5rKHZhbHVlVG8pKSB7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTogRnJvbeaYr2JsYW5rLCBUb+S4jeaYr1xyXG4gIGlmIChfaXNCbGFuayh2YWx1ZUZyb20pICYmIF9pc1ZhbHVlKHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9DUkVBVEVELFxyXG4gICAgICBmcm9tOiBcIlwiLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG4gIGlmIChfaXNCbGFuayh2YWx1ZUZyb20pICYmIF9pc0RhdGUodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0NSRUFURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzQXJyYXkodmFsdWVUbykpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgdW5kZWZpbmVkLCB2YWx1ZVRvW2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzT2JqZWN0KHZhbHVlVG8pKSB7XHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZVRvKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB1bmRlZmluZWQsIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTogRnJvbeS4jeaYr2JsYW5rLCBUb+aYr1xyXG4gIGlmICgoX2lzVmFsdWUodmFsdWVGcm9tKSB8fCBfaXNEYXRlKHZhbHVlRnJvbSkgfHwgX2lzQXJyYXkodmFsdWVGcm9tKSB8fCBfaXNPYmplY3QodmFsdWVGcm9tKSkgJiYgX2lzQmxhbmsodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0RFTEVURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBcIlwiXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr+WAvOaIluaXpeacn++8jFRv5pivQXJyYXlcclxuICBpZiAoKF9pc1ZhbHVlKHZhbHVlRnJvbSkgfHwgX2lzRGF0ZSh2YWx1ZUZyb20pKSAmJiBfaXNBcnJheSh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogXCJcIixcclxuICAgICAgdG86IFwiXCJcclxuICAgIH0pO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgdW5kZWZpbmVkLCB2YWx1ZVRvW2ldKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5piv5YC85oiW5pel5pyf77yMVG/mmK9PYmplY3RcclxuICBpZiAoKF9pc1ZhbHVlKHZhbHVlRnJvbSkgfHwgX2lzRGF0ZSh2YWx1ZUZyb20pKSAmJiBfaXNPYmplY3QodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0RFTEVURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBcIlwiXHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZVRvKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB1bmRlZmluZWQsIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5pivQXJyYXnvvIxUb+aYr+WAvOaIluaXpeacn1xyXG4gIGlmIChfaXNBcnJheSh2YWx1ZUZyb20pICYmIChfaXNWYWx1ZSh2YWx1ZVRvKSB8fCBfaXNEYXRlKHZhbHVlVG8pKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogYEFycmF5WyR7dmFsdWVGcm9tLmxlbmd0aH1dYCxcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr0FycmF577yMVG/mmK9BcnJheVxyXG4gIGlmIChfaXNBcnJheSh2YWx1ZUZyb20pICYmIF9pc0FycmF5KHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmID0gZGlmZi5jb25jYXQoX2dldEFycmF5RGlmZmVuY2UocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lLCB2YWx1ZUZyb20sIHZhbHVlVG8pKTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr0FycmF577yMVG/mmK9PYmplY3RcclxuICBpZiAoX2lzQXJyYXkodmFsdWVGcm9tKSAmJiBfaXNBcnJheSh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogYEFycmF5WyR7dmFsdWVGcm9tLmxlbmd0aH1dYCxcclxuICAgICAgdG86IFwiXCJcclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlVG8pLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaWR4LCBhcnJheSkge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCB2YWwsIHVuZGVmaW5lZCwgdmFsdWVUb1t2YWxdKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IEZyb23mmK9PYmplY3TvvIxUb+aYr+WAvOaIluaXpeacn1xyXG4gIGlmIChfaXNPYmplY3QodmFsdWVGcm9tKSAmJiAoX2lzVmFsdWUodmFsdWVUbykgfHwgX2lzRGF0ZSh2YWx1ZVRvKSkpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX1VQREFURUQsXHJcbiAgICAgIGZyb206IFwie31cIixcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgLy8gY2FzZTogRnJvbeaYr09iamVjdO+8jFRv5pivQXJyYXlcclxuICBpZiAoX2lzT2JqZWN0KHZhbHVlRnJvbSkgJiYgX2lzQXJyYXkodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0RFTEVURUQsXHJcbiAgICAgIGZyb206IFwie31cIixcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgdW5kZWZpbmVkLCB2YWx1ZVRvW2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IEZyb23mmK9PYmplY3TvvIxUb+aYr09iamVjdFxyXG4gIGlmIChfaXNPYmplY3QodmFsdWVGcm9tKSAmJiBfaXNPYmplY3QodmFsdWVUbykpIHtcclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlRnJvbSkuZm9yRWFjaChmdW5jdGlvbiAodmFsLCBpZHgsIGFycmF5KSB7XHJcbiAgICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIHZhbCwgdmFsdWVGcm9tW3ZhbF0sIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZVRvKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgaWYgKHZhbHVlRnJvbVt2YWxdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB1bmRlZmluZWQsIHZhbHVlVG9bdmFsXSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGlmZjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBkZWVwIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gb2JqZWN0cy4gQW4gZW1wdHkgYXJyYXkgd2lsbCBiZSByZXR1cm5lZCBmb3IgdHdvIHNhbWUgb2JqZWN0cyBjb21wYXJpbmcuXHJcbiAqXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHsqfSBwcm9wZXJ0eU5hbWUgb2JqZWN0IG5hbWUsIGFzIHRoZSByb290IHByb3BlcnR5IG5hbWVcclxuICogQHBhcmFtIHsqfSB2YWx1ZUZyb20gdmFsdWUgY29tcGFyaW5nIG9uIHRoZSBsZWZ0XHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWVUbyB2YWx1ZSBjb21wYXJpbmcgb24gdGhlIHJpZ2h0XHJcbiAqIEByZXR1cm5zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gR2V0T2JqZWN0RGlmZmVyZW5jZShvYmplY3ROYW1lLCB2YWx1ZUZyb20sIHZhbHVlVG8pIHtcclxuICByZXR1cm4gX0dldE9iamVjdERpZmZlcmVuY2UoXCJcIiwgb2JqZWN0TmFtZSwgdmFsdWVGcm9tLCB2YWx1ZVRvKTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhbnlUb1N0cmluZyh0KSB7XHJcbiAgaWYgKHR5cGVvZiB0ID09PSBcImJvb2xlYW5cIiB8fCB0eXBlb2YgdCA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgcmV0dXJuIHQudG9TdHJpbmcoKTtcclxuICB9IGVsc2UgaWYgKHQgPT09IG51bGwpIHtcclxuICAgIHJldHVybiBcIm51bGxcIjtcclxuICB9IGVsc2UgaWYgKHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgdCA9PT0gXCJzeW1ib2xcIikge1xyXG4gICAgcmV0dXJuIFwic3ltYm9sXCI7XHJcbiAgfSBlbHNlIGlmICh0IGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgcmV0dXJuIHQudG9VVENTdHJpbmcoKTtcclxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodCkpIHtcclxuICAgIHJldHVybiB0XHJcbiAgICAgIC5tYXAoeCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFueVRvU3RyaW5nKHgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbihcIiwgXCIpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIHQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcclxuICB9XHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9