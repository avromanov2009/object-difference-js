!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ObjDiff",[],e):"object"==typeof exports?exports.ObjDiff=e():t.ObjDiff=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={ObjectDifference:r(1).GetObjectDifference};e.default=n,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetObjectDifference=function(t,e,r){return h("",t,e,r)};var n,o=(n=r(2))&&n.__esModule?n:{default:n};function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u="created",i="updated",c="deleted",p="NA";function a(t){return""===t||0===t||null==t||t==={}||Array.isArray(t)&&t.length<1}function y(t){return!a(t)&&("boolean"==typeof t||"number"==typeof t||"string"==typeof t)}function l(t){return!a(t)&&t instanceof Date}function s(t){return!a(t)&&Array.isArray(t)}function d(t){return"function"==typeof t}function m(t){return"symbol"===f(t)}function b(t){return!(y(t)||a(t)||l(t)||s(t)||d(t)||m(t))}function g(t,e){return t?"".concat(t,".").concat(e):e}function h(t,e,r,n){var f=[];if("__ob__"===e||"__proto__"===e)return f;if(y(r)&&y(n))return r==n?f:(f.push({property:g(t,e),type:i,from:r,to:n}),f);if(d(r)||d(n))return f.push({property:g(t,e),type:p,from:(0,o.default)(r),to:(0,o.default)(n)}),f;if(m(r)||m(n))return f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f;if(l(r)&&l(n))return r.getTime()===n.getTime()?f:(f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f);if(l(n)&&y(r))return new Date(r).getTime()===n.getTime()?f:(f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f);if(l(r)&&y(n))return new Date(n).getTime()===r.getTime()?f:(f.push({property:g(t,e),type:i,from:(0,o.default)(r),to:(0,o.default)(n)}),f);if(a(r)&&a(n))return f;if(a(r)&&y(n))return f.push({property:g(t,e),type:u,from:"",to:(0,o.default)(n)}),f;if(a(r)&&l(n))return f.push({property:g(t,e),type:u,from:"",to:(0,o.default)(n)}),f;if(a(r)&&s(n)){for(var v=0;v<n.length;v++)f=f.concat(h(g(t,e),"[".concat(v,"]"),void 0,n[v]));return f}if(a(r)&&b(n))return Object.getOwnPropertyNames(n).forEach(function(r,o,u){f=f.concat(h(g(t,e),r,void 0,n[r]))}),f;if((y(r)||l(r)||s(r)||b(r))&&a(n))return f.push({property:g(t,e),type:c,from:"",to:""}),f;if((y(r)||l(r))&&s(n)){f.push({property:g(t,e),type:c,from:"",to:""});for(var O=0;O<n.length;O++)f=f.concat(h(g(t,e),"[".concat(O,"]"),void 0,n[O]));return f}if((y(r)||l(r))&&b(n))return f.push({property:g(t,e),type:c,from:"",to:""}),Object.getOwnPropertyNames(n).forEach(function(r,o,u){f=f.concat(h(g(t,e),r,void 0,n[r]))}),f;if(s(r)&&(y(n)||l(n)))return f.push({property:g(t,e),type:i,from:"Array[".concat(r.length,"]"),to:(0,o.default)(n)}),f;if(s(r)&&s(n))return f=f.concat(function(t,e,r,n){var o=[];if(r.length===n.length){for(var f=0;f<r.length;f++)if(JSON.stringify(r[f])!==JSON.stringify(n[f]))for(var u=0;u<r.length;u++)o=o.concat(h(g(t,e),"[".concat(u,"]"),r[u],n[u]));return o}if(r.length>30||n.length>30)return o.push({property:g(t,e),type:i,from:"Array[".concat(r.length,"]"),to:"Array[".concat(n.length,"]")}),o;function c(t){return function(e){return 0===t.filter(function(t){return JSON.stringify(t)===JSON.stringify(e)}).length}}for(var p=r.filter(c(n)),a=n.filter(c(r)),y=0;y<p.length;y++)o=o.concat(h(g(t,e),"[".concat(y,"]"),p[y],void 0));for(var l=0;l<a.length;l++)o=o.concat(h(g(t,e),"[".concat(l,"]"),void 0,a[l]));return o}(t,e,r,n));if(s(r)&&s(n))return f.push({property:g(t,e),type:c,from:"Array[".concat(r.length,"]"),to:""}),Object.getOwnPropertyNames(n).forEach(function(r,o,u){f=f.concat(h(g(t,e),r,void 0,n[r]))}),f;if(b(r)&&(y(n)||l(n)))return f.push({property:g(t,e),type:i,from:"{}",to:(0,o.default)(n)}),f;if(b(r)&&s(n)){f.push({property:g(t,e),type:c,from:"{}",to:(0,o.default)(n)});for(var j=0;j<n.length;j++)f=f.concat(h(g(t,e),"[".concat(j,"]"),void 0,n[j]));return f}return b(r)&&b(n)&&(Object.getOwnPropertyNames(r).forEach(function(o,u,i){f=f.concat(h(g(t,e),o,r[o],n[o]))}),Object.getOwnPropertyNames(n).forEach(function(o,u,i){void 0===r[o]&&(f=f.concat(h(g(t,e),o,void 0,n[o])))})),f}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){if("boolean"==typeof e||"number"==typeof e||"string"==typeof e)return e.toString();if(null===e)return"null";if(void 0===e)return"undefined";if("symbol"===n(e))return"symbol";if(e instanceof Date)return e.toUTCString();if(Array.isArray(e))return e.map(function(e){return t(e)}).join(", ");if("function"==typeof e)return"function";return JSON.stringify(e)},t.exports=e.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9PYmpEaWZmL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9PYmpEaWZmL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL09iakRpZmYvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vT2JqRGlmZi8uL3NyYy9vYmplY3REaWZmZXJlbmNlLmpzIiwid2VicGFjazovL09iakRpZmYvLi9zcmMvYW55VG9TdHJpbmcuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiT2JqZWN0RGlmZmVyZW5jZSIsIkdldE9iamVjdERpZmZlcmVuY2UiLCJvYmplY3ROYW1lIiwidmFsdWVGcm9tIiwidmFsdWVUbyIsIl9HZXRPYmplY3REaWZmZXJlbmNlIiwiX2FueVRvU3RyaW5nIiwiVkFMVUVfQ1JFQVRFRCIsIlZBTFVFX1VQREFURUQiLCJWQUxVRV9ERUxFVEVEIiwiTk9UX0NPTVBBUkFCTEUiLCJfaXNCbGFuayIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIl9pc1ZhbHVlIiwiX2lzRGF0ZSIsIkRhdGUiLCJfaXNBcnJheSIsIl9pc0Z1bmN0aW9uIiwiX2lzU3ltYm9sIiwiX3R5cGVvZiIsIl9pc09iamVjdCIsIl9nZXRGdWxsUHJvcE5hbWUiLCJwYXJlbnROYW1lIiwicHJvcGVydHlOYW1lIiwiY29uY2F0IiwiZGlmZiIsInB1c2giLCJ0eXBlIiwiZnJvbSIsInRvIiwiZGVmYXVsdCIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZm9yRWFjaCIsInZhbCIsImlkeCIsImFycmF5IiwiYTEiLCJhMiIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb21wYXJlciIsIm90aGVyQXJyYXkiLCJjdXJyZW50IiwiZmlsdGVyIiwib3RoZXIiLCJvbmx5SW5BMSIsIm9ubHlJbkEyIiwiX2dldEFycmF5RGlmZmVuY2UiLCJhbnlUb1N0cmluZyIsInRvU3RyaW5nIiwidG9VVENTdHJpbmciLCJtYXAiLCJ4Iiwiam9pbiJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxhQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLFFBQUFELElBRUFELEVBQUEsUUFBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFB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a0IsRUFBaUJDLEVBQVlDLEdBQWVZLEVBQUtsQyxFQUFVa0MsR0FBTWpDLEVBQVFpQyxPQUVuSDNELE9BQU95RCxvQkFBb0IvQixHQUFTZ0MsUUFBUSxTQUFVQyxFQUFLQyxFQUFLQyxRQUN2Q0wsSUFBbkIvQixFQUFVa0MsS0FHZFYsRUFBT0EsRUFBS0QsT0FBT3JCLEVBQXFCa0IsRUFBaUJDLEVBQVlDLEdBQWVZLE9BQUtILEVBQVc5QixFQUFRaUMsU0FJekdWLGlVQzNUTSxTQUFTeUIsRUFBWWxFLEdBQ2xDLEdBQWlCLGtCQUFOQSxHQUFnQyxpQkFBTkEsR0FBK0IsaUJBQU5BLEVBQzVELE9BQU9BLEVBQUVtRSxXQUNKLEdBQVUsT0FBTm5FLEVBQ1QsTUFBTyxPQUNGLFFBQVVnRCxJQUFOaEQsRUFDVCxNQUFPLFlBRVQsR0FBaUIsV0FBYm1DLEVBQU9uQyxHQUNULE1BQU8sU0FDRixHQUFJQSxhQUFhK0IsS0FDdEIsT0FBTy9CLEVBQUVvRSxjQUNKLEdBQUkxQyxNQUFNQyxRQUFRM0IsR0FDdkIsT0FBT0EsRUFDSnFFLElBQUksU0FBQUMsR0FDSCxPQUFPSixFQUFZSSxLQUVwQkMsS0FBSyxNQUNILEdBQWlCLG1CQUFOdkUsRUFDaEIsTUFBTyxXQUVULE9BQU93RCxLQUFLQyxVQUFVekQiLCJmaWxlIjoib2JqZWN0LWRpZmZlcmVuY2UtanMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJPYmpEaWZmXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIk9iakRpZmZcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiT2JqRGlmZlwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBHZXRPYmplY3REaWZmZXJlbmNlIGFzIE9iamVjdERpZmZlcmVuY2V9IGZyb20gXCIuL29iamVjdERpZmZlcmVuY2UuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgeyBPYmplY3REaWZmZXJlbmNlIH07XHJcbiIsImltcG9ydCBhbnlUb1N0cmluZyBmcm9tIFwiLi9hbnlUb1N0cmluZy5qc1wiO1xyXG5cclxuY29uc3QgVkFMVUVfQ1JFQVRFRCA9IFwiY3JlYXRlZFwiLFxyXG4gIFZBTFVFX1VQREFURUQgPSBcInVwZGF0ZWRcIixcclxuICBWQUxVRV9ERUxFVEVEID0gXCJkZWxldGVkXCIsXHJcbiAgTk9UX0NPTVBBUkFCTEUgPSBcIk5BXCI7XHJcblxyXG5mdW5jdGlvbiBfaXNCbGFuayh0KSB7XHJcbiAgcmV0dXJuIHQgPT09IFwiXCIgfHwgdCA9PT0gMCB8fCB0ID09PSB1bmRlZmluZWQgfHwgdCA9PT0gbnVsbCB8fCB0ID09PSB7fSB8fCAoQXJyYXkuaXNBcnJheSh0KSAmJiB0Lmxlbmd0aCA8IDEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1ZhbHVlKHQpIHtcclxuICByZXR1cm4gIV9pc0JsYW5rKHQpICYmICh0eXBlb2YgdCA9PT0gXCJib29sZWFuXCIgfHwgdHlwZW9mIHQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHQgPT09IFwic3RyaW5nXCIpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0RhdGUodCkge1xyXG4gIHJldHVybiAhX2lzQmxhbmsodCkgJiYgdCBpbnN0YW5jZW9mIERhdGU7XHJcbn1cclxuZnVuY3Rpb24gX2lzQXJyYXkodCkge1xyXG4gIHJldHVybiAhX2lzQmxhbmsodCkgJiYgQXJyYXkuaXNBcnJheSh0KTtcclxufVxyXG5mdW5jdGlvbiBfaXNGdW5jdGlvbih0KSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB0ID09PSBcImZ1bmN0aW9uXCI7XHJcbn1cclxuZnVuY3Rpb24gX2lzU3ltYm9sKHQpIHtcclxuICByZXR1cm4gdHlwZW9mIHQgPT09IFwic3ltYm9sXCI7XHJcbn1cclxuZnVuY3Rpb24gX2lzT2JqZWN0KHQpIHtcclxuICByZXR1cm4gIV9pc1ZhbHVlKHQpICYmICFfaXNCbGFuayh0KSAmJiAhX2lzRGF0ZSh0KSAmJiAhX2lzQXJyYXkodCkgJiYgIV9pc0Z1bmN0aW9uKHQpICYmICFfaXNTeW1ib2wodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSB7XHJcbiAgcmV0dXJuIHBhcmVudE5hbWUgPyBgJHtwYXJlbnROYW1lfS4ke3Byb3BlcnR5TmFtZX1gIDogcHJvcGVydHlOYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZ2V0QXJyYXlEaWZmZW5jZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUsIGExLCBhMikge1xyXG4gIGxldCBkaWZmID0gW107XHJcblxyXG4gIGlmIChhMS5sZW5ndGggPT09IGEyLmxlbmd0aCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYTFbaV0pID09PSBKU09OLnN0cmluZ2lmeShhMltpXSkpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGExLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCBgWyR7aX1dYCwgYTFbaV0sIGEyW2ldKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgaWYgKGExLmxlbmd0aCA+IDMwIHx8IGEyLmxlbmd0aCA+IDMwKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiBgQXJyYXlbJHthMS5sZW5ndGh9XWAsXHJcbiAgICAgIHRvOiBgQXJyYXlbJHthMi5sZW5ndGh9XWBcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21wYXJlcihvdGhlckFycmF5KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGN1cnJlbnQpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICBvdGhlckFycmF5LmZpbHRlcihmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvdGhlcikgPT09IEpTT04uc3RyaW5naWZ5KGN1cnJlbnQpO1xyXG4gICAgICAgIH0pLmxlbmd0aCA9PT0gMFxyXG4gICAgICApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGxldCBvbmx5SW5BMSA9IGExLmZpbHRlcihjb21wYXJlcihhMikpO1xyXG5cclxuICBsZXQgb25seUluQTIgPSBhMi5maWx0ZXIoY29tcGFyZXIoYTEpKTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbmx5SW5BMS5sZW5ndGg7IGkrKykge1xyXG4gICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgYFske2l9XWAsIG9ubHlJbkExW2ldLCB1bmRlZmluZWQpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxyXG4gIH1cclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbmx5SW5BMi5sZW5ndGg7IGkrKykge1xyXG4gICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgYFske2l9XWAsIHVuZGVmaW5lZCwgb25seUluQTJbaV0pKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRpZmY7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9HZXRPYmplY3REaWZmZXJlbmNlKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSwgdmFsdWVGcm9tLCB2YWx1ZVRvKSB7XHJcbiAgbGV0IGRpZmYgPSBbXTtcclxuXHJcbiAgaWYgKHByb3BlcnR5TmFtZSA9PT0gXCJfX29iX19cIiB8fCBwcm9wZXJ0eU5hbWUgPT09IFwiX19wcm90b19fXCIpIHtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuICAvLyBjYXNlOiDkuKTkuKrpg73mmK/ln7rnoYDnsbvlnotcclxuICBpZiAoX2lzVmFsdWUodmFsdWVGcm9tKSAmJiBfaXNWYWx1ZSh2YWx1ZVRvKSkge1xyXG4gICAgaWYgKHZhbHVlRnJvbSA9PSB2YWx1ZVRvKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgICAgcmV0dXJuIGRpZmY7XHJcbiAgICB9XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiB2YWx1ZUZyb20sXHJcbiAgICAgIHRvOiB2YWx1ZVRvXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTog5o6S6Zmk5pyJZnVuY3Rpb27nmoTmg4XlhrVcclxuICBpZiAoX2lzRnVuY3Rpb24odmFsdWVGcm9tKSB8fCBfaXNGdW5jdGlvbih2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogTk9UX0NPTVBBUkFCTEUsXHJcbiAgICAgIGZyb206IGFueVRvU3RyaW5nKHZhbHVlRnJvbSksXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IOWFtuS4reS4gOS4quaYr3N5bWJvbFxyXG4gIGlmIChfaXNTeW1ib2wodmFsdWVGcm9tKSB8fCBfaXNTeW1ib2wodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX1VQREFURUQsXHJcbiAgICAgIGZyb206IGFueVRvU3RyaW5nKHZhbHVlRnJvbSksXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IOS4pOS4qumDveaYr+aXpeacn1xyXG4gIGlmIChfaXNEYXRlKHZhbHVlRnJvbSkgJiYgX2lzRGF0ZSh2YWx1ZVRvKSkge1xyXG4gICAgaWYgKHZhbHVlRnJvbS5nZXRUaW1lKCkgPT09IHZhbHVlVG8uZ2V0VGltZSgpKSB7XHJcbiAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgfVxyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogYW55VG9TdHJpbmcodmFsdWVGcm9tKSxcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTog5LiA5Liq5piv5pel5pyf77yM5Y+m5LiA5Liq5piv5YC8XHJcbiAgaWYgKF9pc0RhdGUodmFsdWVUbykgJiYgX2lzVmFsdWUodmFsdWVGcm9tKSkge1xyXG4gICAgaWYgKG5ldyBEYXRlKHZhbHVlRnJvbSkuZ2V0VGltZSgpID09PSB2YWx1ZVRvLmdldFRpbWUoKSkge1xyXG4gICAgICByZXR1cm4gZGlmZjtcclxuICAgIH1cclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX1VQREFURUQsXHJcbiAgICAgIGZyb206IGFueVRvU3RyaW5nKHZhbHVlRnJvbSksXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgaWYgKF9pc0RhdGUodmFsdWVGcm9tKSAmJiBfaXNWYWx1ZSh2YWx1ZVRvKSkge1xyXG4gICAgaWYgKG5ldyBEYXRlKHZhbHVlVG8pLmdldFRpbWUoKSA9PT0gdmFsdWVGcm9tLmdldFRpbWUoKSkge1xyXG4gICAgICByZXR1cm4gZGlmZjtcclxuICAgIH1cclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX1VQREFURUQsXHJcbiAgICAgIGZyb206IGFueVRvU3RyaW5nKHZhbHVlRnJvbSksXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IOS4pOS4qumDveaYr0JsYW5rXHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzQmxhbmsodmFsdWVUbykpIHtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuICAvLyBjYXNlOiBGcm9t5pivYmxhbmssIFRv5LiN5pivXHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzVmFsdWUodmFsdWVUbykpIHtcclxuICAgIGRpZmYucHVzaCh7XHJcbiAgICAgIHByb3BlcnR5OiBfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksXHJcbiAgICAgIHR5cGU6IFZBTFVFX0NSRUFURUQsXHJcbiAgICAgIGZyb206IFwiXCIsXHJcbiAgICAgIHRvOiBhbnlUb1N0cmluZyh2YWx1ZVRvKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcbiAgaWYgKF9pc0JsYW5rKHZhbHVlRnJvbSkgJiYgX2lzRGF0ZSh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfQ1JFQVRFRCxcclxuICAgICAgZnJvbTogXCJcIixcclxuICAgICAgdG86IGFueVRvU3RyaW5nKHZhbHVlVG8pXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuICBpZiAoX2lzQmxhbmsodmFsdWVGcm9tKSAmJiBfaXNBcnJheSh2YWx1ZVRvKSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZVRvLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCB1bmRlZmluZWQsIHZhbHVlVG9baV0pKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuICBpZiAoX2lzQmxhbmsodmFsdWVGcm9tKSAmJiBfaXNPYmplY3QodmFsdWVUbykpIHtcclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlVG8pLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaWR4LCBhcnJheSkge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCB2YWwsIHVuZGVmaW5lZCwgdmFsdWVUb1t2YWxdKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuICAvLyBjYXNlOiBGcm9t5LiN5pivYmxhbmssIFRv5pivXHJcbiAgaWYgKChfaXNWYWx1ZSh2YWx1ZUZyb20pIHx8IF9pc0RhdGUodmFsdWVGcm9tKSB8fCBfaXNBcnJheSh2YWx1ZUZyb20pIHx8IF9pc09iamVjdCh2YWx1ZUZyb20pKSAmJiBfaXNCbGFuayh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogXCJcIixcclxuICAgICAgdG86IFwiXCJcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5piv5YC85oiW5pel5pyf77yMVG/mmK9BcnJheVxyXG4gIGlmICgoX2lzVmFsdWUodmFsdWVGcm9tKSB8fCBfaXNEYXRlKHZhbHVlRnJvbSkpICYmIF9pc0FycmF5KHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9ERUxFVEVELFxyXG4gICAgICBmcm9tOiBcIlwiLFxyXG4gICAgICB0bzogXCJcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZVRvLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCB1bmRlZmluZWQsIHZhbHVlVG9baV0pKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IEZyb23mmK/lgLzmiJbml6XmnJ/vvIxUb+aYr09iamVjdFxyXG4gIGlmICgoX2lzVmFsdWUodmFsdWVGcm9tKSB8fCBfaXNEYXRlKHZhbHVlRnJvbSkpICYmIF9pc09iamVjdCh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogXCJcIixcclxuICAgICAgdG86IFwiXCJcclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlVG8pLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaWR4LCBhcnJheSkge1xyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCB2YWwsIHVuZGVmaW5lZCwgdmFsdWVUb1t2YWxdKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9XHJcblxyXG4gIC8vIGNhc2U6IEZyb23mmK9BcnJhee+8jFRv5piv5YC85oiW5pel5pyfXHJcbiAgaWYgKF9pc0FycmF5KHZhbHVlRnJvbSkgJiYgKF9pc1ZhbHVlKHZhbHVlVG8pIHx8IF9pc0RhdGUodmFsdWVUbykpKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9VUERBVEVELFxyXG4gICAgICBmcm9tOiBgQXJyYXlbJHt2YWx1ZUZyb20ubGVuZ3RofV1gLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5pivQXJyYXnvvIxUb+aYr0FycmF5XHJcbiAgaWYgKF9pc0FycmF5KHZhbHVlRnJvbSkgJiYgX2lzQXJyYXkodmFsdWVUbykpIHtcclxuICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfZ2V0QXJyYXlEaWZmZW5jZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUsIHZhbHVlRnJvbSwgdmFsdWVUbykpO1xyXG4gICAgcmV0dXJuIGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBjYXNlOiBGcm9t5pivQXJyYXnvvIxUb+aYr09iamVjdFxyXG4gIGlmIChfaXNBcnJheSh2YWx1ZUZyb20pICYmIF9pc0FycmF5KHZhbHVlVG8pKSB7XHJcbiAgICBkaWZmLnB1c2goe1xyXG4gICAgICBwcm9wZXJ0eTogX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLFxyXG4gICAgICB0eXBlOiBWQUxVRV9ERUxFVEVELFxyXG4gICAgICBmcm9tOiBgQXJyYXlbJHt2YWx1ZUZyb20ubGVuZ3RofV1gLFxyXG4gICAgICB0bzogXCJcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWVUbykuZm9yRWFjaChmdW5jdGlvbiAodmFsLCBpZHgsIGFycmF5KSB7XHJcbiAgICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIHZhbCwgdW5kZWZpbmVkLCB2YWx1ZVRvW3ZhbF0pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr09iamVjdO+8jFRv5piv5YC85oiW5pel5pyfXHJcbiAgaWYgKF9pc09iamVjdCh2YWx1ZUZyb20pICYmIChfaXNWYWx1ZSh2YWx1ZVRvKSB8fCBfaXNEYXRlKHZhbHVlVG8pKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfVVBEQVRFRCxcclxuICAgICAgZnJvbTogXCJ7fVwiLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuICAvLyBjYXNlOiBGcm9t5pivT2JqZWN077yMVG/mmK9BcnJheVxyXG4gIGlmIChfaXNPYmplY3QodmFsdWVGcm9tKSAmJiBfaXNBcnJheSh2YWx1ZVRvKSkge1xyXG4gICAgZGlmZi5wdXNoKHtcclxuICAgICAgcHJvcGVydHk6IF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSxcclxuICAgICAgdHlwZTogVkFMVUVfREVMRVRFRCxcclxuICAgICAgZnJvbTogXCJ7fVwiLFxyXG4gICAgICB0bzogYW55VG9TdHJpbmcodmFsdWVUbylcclxuICAgIH0pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZVRvLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGRpZmYgPSBkaWZmLmNvbmNhdChfR2V0T2JqZWN0RGlmZmVyZW5jZShfZ2V0RnVsbFByb3BOYW1lKHBhcmVudE5hbWUsIHByb3BlcnR5TmFtZSksIGBbJHtpfV1gLCB1bmRlZmluZWQsIHZhbHVlVG9baV0pKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkaWZmO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FzZTogRnJvbeaYr09iamVjdO+8jFRv5pivT2JqZWN0XHJcbiAgaWYgKF9pc09iamVjdCh2YWx1ZUZyb20pICYmIF9pc09iamVjdCh2YWx1ZVRvKSkge1xyXG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWVGcm9tKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGlkeCwgYXJyYXkpIHtcclxuICAgICAgZGlmZiA9IGRpZmYuY29uY2F0KF9HZXRPYmplY3REaWZmZXJlbmNlKF9nZXRGdWxsUHJvcE5hbWUocGFyZW50TmFtZSwgcHJvcGVydHlOYW1lKSwgdmFsLCB2YWx1ZUZyb21bdmFsXSwgdmFsdWVUb1t2YWxdKSk7XHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlVG8pLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaWR4LCBhcnJheSkge1xyXG4gICAgICBpZiAodmFsdWVGcm9tW3ZhbF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBkaWZmID0gZGlmZi5jb25jYXQoX0dldE9iamVjdERpZmZlcmVuY2UoX2dldEZ1bGxQcm9wTmFtZShwYXJlbnROYW1lLCBwcm9wZXJ0eU5hbWUpLCB2YWwsIHVuZGVmaW5lZCwgdmFsdWVUb1t2YWxdKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkaWZmO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGRlZXAgZGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBvYmplY3RzLiBBbiBlbXB0eSBhcnJheSB3aWxsIGJlIHJldHVybmVkIGZvciB0d28gc2FtZSBvYmplY3RzIGNvbXBhcmluZy5cclxuICpcclxuICogQGV4cG9ydFxyXG4gKiBAcGFyYW0geyp9IHByb3BlcnR5TmFtZSBvYmplY3QgbmFtZSwgYXMgdGhlIHJvb3QgcHJvcGVydHkgbmFtZVxyXG4gKiBAcGFyYW0geyp9IHZhbHVlRnJvbSB2YWx1ZSBjb21wYXJpbmcgb24gdGhlIGxlZnRcclxuICogQHBhcmFtIHsqfSB2YWx1ZVRvIHZhbHVlIGNvbXBhcmluZyBvbiB0aGUgcmlnaHRcclxuICogQHJldHVybnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRPYmplY3REaWZmZXJlbmNlKG9iamVjdE5hbWUsIHZhbHVlRnJvbSwgdmFsdWVUbykge1xyXG4gIHJldHVybiBfR2V0T2JqZWN0RGlmZmVyZW5jZShcIlwiLCBvYmplY3ROYW1lLCB2YWx1ZUZyb20sIHZhbHVlVG8pO1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFueVRvU3RyaW5nKHQpIHtcclxuICBpZiAodHlwZW9mIHQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiB0ID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICByZXR1cm4gdC50b1N0cmluZygpO1xyXG4gIH0gZWxzZSBpZiAodCA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIFwibnVsbFwiO1xyXG4gIH0gZWxzZSBpZiAodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiB0ID09PSBcInN5bWJvbFwiKSB7XHJcbiAgICByZXR1cm4gXCJzeW1ib2xcIjtcclxuICB9IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICByZXR1cm4gdC50b1VUQ1N0cmluZygpO1xyXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0KSkge1xyXG4gICAgcmV0dXJuIHRcclxuICAgICAgLm1hcCh4ID0+IHtcclxuICAgICAgICByZXR1cm4gYW55VG9TdHJpbmcoeCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5qb2luKFwiLCBcIik7XHJcbiAgfSBlbHNlIGlmICh0eXBlb2YgdCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xyXG4gIH1cclxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XHJcblxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=